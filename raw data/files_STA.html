<!DOCTYPE HTML>
<html>
<head>
    <meta charset = "utf-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <!-- Chrome, Firefox OS and Opera -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=476mA4zprB">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=476mA4zprB">
    <link rel="shortcut icon" href="/favicon.ico?v=476mA4zprB">
    <!-- Tab Color iOS Safari -->
    <meta name="apple-mobile-web-app-title" content="Metrici.ro">
    <meta name="application-name" content="Metrici.ro">
    <!-- Tab Color Android Chrome -->
    <meta name="theme-color" content="#e11422">
    <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link rel = "stylesheet" type = "text/css" href = "newMaster.css">   
    <title>File Browser</title>

<style>
   table, td, th {
	  border: 1px solid #e11422;
   }
</style>
</head>

<body>
   <div class="logo_container">
      <img url="/logo.png">
      <span class = "version">Radar Controller</br>Version: %PH_Version%</span>
   </div>

   <div class="topnav" id="myTopnav">
      <div class = "center_nav">
            <a href="/home">Home</a>
            <div class="dropdown">
               <button class="dropbtn">Network Settings
                  <i class="fa fa-caret-down"></i>
               </button>
               <div class="dropdown-content">
                  <a href="/dhcpIP">DHCP IP</a>
                  <a href="/staticIP">Static IP</a>
               </div>
            </div>
            <a href="/files" class="active">Import/Export Data</a>
            <a href="/radar">Radar Settings</a>
            <a href="/update">Update</a>
            <a href="javascript:void(0);" class="icon" onclick="navBarFunction()">
            <i class="fa fa-bars"></i>
            </a>
      </div>
   </div>

   <div class="center_box">
      <div class = "box_head">
            <div class = "title"><h1>Setup - Import/Export Data</h1></div>
      </div>   
      <table style="margin: 0 auto; text-align: center; color: white;" >
      <tr>
         <th colspan="4" style="text-align: center">~count~ Config files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total: 
         ~total~ kB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used: ~used~ kB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Free: 
         ~free~ kB</th>
      </tr>
      <tr>
         <th>Name</th>
         <th>Size</th>
         <th colspan="2">Action</th>
      </tr>
      ~directories~
      </table>
   </div>
   <div class="center_box">
      <div class = "upload_firmware_container">
         Only one of the following file names will work <span style="color:#e11422">networkRadar.txt</span>
         , <span style="color:#e11422">configRadar.txt</span> or <span style="color:#e11422">userRadar.txt</span></br></br>
         <div style="text-align:left; margin-left:10px;">
            Notes:</br>
            (1): After a file upload please check in the table above that the file's name ends in <span style="color:#e11422">.txt</span>.</br>
            (2): If the file doesn't end in <span style="color:#e11422">.txt</span> please refer to the User's Manual.</br>
            (3): A restart is necessary after a file upload.</br>
            (4): You can upload all the files you need before restarting the device.
         </div>
         <form method = "POST" action="/doUpload" enctype="multipart/form-data">
            <label class="file_input_label" for="files">Browse files</label>
            <input id="files" type="file" name="data"/>
            <input class="upload_button" type="submit" name="upload" value="Upload" title = "Upload Files">
         </form>
         <form method="POST">
            <input class = "restart_button" type="submit" name="restart_device" value="Restart Device">
         </form>
      </div>
   </div>

   <div class = "bottom_container">
         <div class = "box_head"> <div class = "title"> <h1>Logs</h1> </div> </div>
         <div class = "text_box">%PLACEHOLDER_LOGS%</div>
   </div>

   <script>
      function navBarFunction() {
         var x = document.getElementById("myTopnav");
         if (x.className === "topnav") {
               x.className += " responsive";
         } else {
               x.className = "topnav";
         }
      }

      $('#files').on("change",function() {
            console.log("change fire");
            var i = $(this).prev('label').clone();
            var file = $('#files')[0].files[0].name;
            console.log(file);
            $(this).prev('label').text(file);        
      });
   </script>

</body>
</html>